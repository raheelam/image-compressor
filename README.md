# Adaptive k-Means Color-Palette Compression for the Web

This repository contains the full research package submitted to the _Turkish Journal of Electrical Engineering and Computer Sciences_ (TJEECS).

## Directory layout

```
├── src/                # Python source code (features, networks, pipeline)
├── scripts/            # Helper CLI scripts (training, evaluation, plots)
├── models/             # Pre-trained lightweight networks (~20 kB total)
├── results/            # Compressed images, metrics, figures
├── manuscript/         # TJEECS LaTeX template and `draft.tex / pdf`
├── figures/            # Vector PDFs generated by the plotting script
├── requirements.txt    # Python dependencies
└── Makefile            # Convenience targets (env, train, eval, figs, paper)
```

## Quick-start (macOS / Linux)

```bash
# 1. Clone and set up a fresh virtual environment
python -m venv .venv && source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt

# 2. Train the two tiny networks (optional — weights already provided)
python -m src.adaptive_k --train
python -m src.refine_centroid --train

# 3. Run evaluation on validation images (≈4 GB RAM peak)
python scripts/run_evaluation.py --processes 1

# 4. Generate rate–distortion figures & summary table
python scripts/plot_results.py

# 5. Compile the manuscript (requires [Tectonic](https://tectonic-typesetting.github.io/))
cd manuscript && tectonic draft.tex && open draft.pdf

# 6. Launch the interactive Streamlit demo (optional)
pip install streamlit --quiet      # only needed once
streamlit run demo/app.py          # opens http://localhost:8501
```

## Reproducibility

- All random seeds are fixed (`torch.manual_seed(0)`, `numpy.random.seed(0)`).
- Evaluation and figures are fully scripted; no Jupyter notebooks required.
- The trained models occupy <25 kB and are committed to `models/`.

## License

The code is released under the MIT License. Dataset images belong to their respective owners and are **not** redistributed—see the paper for download links.

## Demo usage

The Streamlit front-end lets you:

1. Drag-and-drop a PNG or JPEG (≤ 4 MP).
2. See the compressed PNG-8 next to the original along with file sizes.
3. Inspect PSNR-HVS and SSIM metrics computed on the fly.
4. Download the palette-optimised image.

All processing runs locally—no files leave your machine.
